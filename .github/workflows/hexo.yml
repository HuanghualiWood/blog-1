# This workflow will do a clean install of node dependencies, build the source code and run tests across different versions of node
# For more information see: https://help.github.com/actions/language-and-framework-guides/using-nodejs-with-github-actions

name: Hexo CI

on:
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [10.x, 12.x]
    
    steps:
    - uses: actions/checkout@master # 拉取博客最新源文件
    - name: Use Node.js 12.x # 指定 Node.js 版本
      uses: actions/setup-node@master
      with:
        node-version: 12.x
    - uses: actions/checkout@v2
    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v1
      with:
        node-version: ${{ matrix.node-version }}

    - name: Setup Hexo env # 初始化 Hexo 环境
      run: |
        npm install hexo-cli -g
        npm install
    - name: test
    - run: |
        node -v && npm -v

#- name: Setup Deploy Private Key
#  env:
#    HEXO_DEPLOY_PRIVATE_KEY: ${{ secrets.HEXO_DEPLOY_PRIVATE_KEY }}
#  run: |
#    mkdir -p ~/.ssh/
#    echo "$HEXO_DEPLOY_PRIVATE_KEY" > ~/.ssh/id_rsa 
#    chmod 600 ~/.ssh/id_rsa
#    ssh-keyscan github.com >> ~/.ssh/known_hosts

#- name: Setup Git Infomation
#  run: | 
#    git config --global user.name 'Github用户名' 
#    git config --global user.email 'Github注册邮箱'
#- name: Deploy Hexo 
#  run: |
#    hexo clean
#    hexo generate 
#    hexo deploy
